xlab("Percentage Visible Minority") +
ylab("Average Family Income") +
ylim(20000, 300000) +
ggtitle("P
ggplot(dat, aes(x=dat$per_vis_min, y=dat$average_family_income)) +
geom_point(shape = 1, alpha=1/4) +
scale_colour_hue(l=50) +
geom_smooth(method=lm, color = "gold") +
xlab("Percentage Visible Minority") +
ylab("Average Family Income") +
ylim(20000, 300000) +
ggtitle("Percentage of visible minorities vs Income in Toronto Neighbourhoods")
ggplot(dat, aes(x=dat$per_vis_min, y=dat$average_family_income)) +
geom_point(shape = 1, alpha=1/4) +
scale_colour_hue(l=50) +
geom_smooth(method=lm, color = "gold") +
ylim(20000, 300000) +
xlab("Percentage Visible Minority") +
ylab("Average Family Income") +
ggtitle("Percentage of visible minorities vs Income in Toronto Neighbourhoods")
ggplot(dat, aes(x=dat$per_vis_min, y=dat$average_family_income)) +
geom_point(shape = 1, alpha=1/4) +
scale_colour_hue(l=50) +
geom_smooth(method=lm, color = "gold") +
ylim(20000, 400000) +
xlab("Percentage Visible Minority") +
ylab("Average Family Income") +
ggtitle("Percentage of visible minorities vs Income in Toronto Neighbourhoods")
ggplot(dat, aes(x=dat$per_vis_min, y=dat$average_family_income)) +
geom_point(shape = 1, alpha=1/4) +
scale_colour_hue(l=50) +
geom_smooth(method=lm, color = "gold") +
ylim(20000, 400000) +
options(scipen=10000)+
xlab("Percentage Visible Minority") +
ylab("Average Family Income") +
ggtitle("Percentage of visible minorities vs Income in Toronto Neighbourhoods")
ggplot(dat, aes(x=dat$per_vis_min, y=dat$average_family_income)) +
geom_point(shape = 1, alpha=1/4) +
scale_colour_hue(l=50) +
geom_smooth(method=lm, color = "gold") +
ylim(20000, 400000) +
options(scipen=10000) +
xlab("Percentage Visible Minority") +
ylab("Average Family Income") +
ggtitle("Percentage of visible minorities vs Income in Toronto Neighbourhoods")
ggplot(dat, aes(x=dat$per_vis_min, y=dat$average_family_income)) +
geom_point(shape = 1, alpha=1/4) +
scale_colour_hue(l=50) +
geom_smooth(method=lm, color = "orange") +
ylim(20000, 400000) +
options(scipen=10000) +
xlab("Percentage Visible Minority") +
ylab("Average Family Income") +
ggtitle("Percentage of visible minorities vs Income in Toronto Neighbourhoods")
ggplot(dat, aes(x=dat$per_vis_min, y=dat$average_family_income)) +
geom_point(shape = 1, alpha=1/4) +
scale_colour_hue(l=50) +
geom_smooth(method=lm, color = "orange") +
ylim(20000, 400000) +
xlab("Percentage Visible Minority") +
ylab("Average Family Income") +
ggtitle("Percentage of visible minorities vs Income in Toronto Neighbourhoods")
library(scales)
ggplot(dat, aes(x=dat$per_vis_min, y=dat$average_family_income)) +
geom_point(shape = 1, alpha=1/4) +
scale_colour_hue(l=50) +
geom_smooth(method=lm, color = "orange") +
ylim(20000, 400000) +
xlab("Percentage Visible Minority") +
ylab("Average Family Income") +
ggtitle("Percentage of visible minorities vs Income in Toronto Neighbourhoods") +
scale_y_continuous(labels = comma)
ggplot(dat, aes(x=dat$per_vis_min, y=dat$average_family_income)) +
geom_point(shape = 1, alpha=1/4) +
scale_colour_hue(l=50) +
geom_smooth(method=lm, color = "orange") +
xlab("Percentage Visible Minority") +
ylab("Average Family Income") +
ggtitle("Percentage of visible minorities vs Income in Toronto Neighbourhoods") +
scale_y_continuous(labels = comma)
ggplot(dat, aes(x=dat$per_vis_min, y=dat$average_family_income)) +
geom_point(shape = 1, alpha=1/4) +
scale_colour_hue(l=50) +
geom_smooth(method=lm, color = "orange") +
xlab("Percentage Visible Minority") +
ylab("Average Family Income") +
ggtitle("Percentage of Visible Minorities vs Family Income by Toronto Neighbourhoods") +
scale_y_continuous(labels = comma)
hist(dat$assaults_per_cap)
summary(dat$assaults_per_cap)
dat$neighbourhood[dat$assaults_per_cap == max(dat$assaults_per_cap)]
dat[dat$neighbourhood == "Bay Street Corridor",]
summary(dat$total_population)
dat$neighbourhood[dat$assaults_per_cap > median(dat$assaults_per_cap)]
dat$neighbourhood[dat$assaults_per_cap > 0.75]
dat$neighbourhood[dat$assaults_per_cap > 1]
dat$neighbourhood[dat$assaults_per_cap > 2]
dat$assaults_per_cap <- (dat$assaults/dat$total_population)
dat$assaults_per_cap <- round(dat$assaults_per_cap, 2)
dat$assaults_per_cap <- round(dat$assaults_per_cap, 4)
dat$assaults_per_cap <- (dat$assaults/dat$total_population)
dat$assaults_per_cap <- round(dat$assaults_per_cap, 4)
View(dat)
hist(dat$assaults_per_cap)
dat$neighbourhood[dat$assaults_per_cap == max(dat$assaults_per_cap)]
per_unemployed <- (dat$unemployed/dat$total_population)*100
per_unemployed <- round(per_unemployed, 2)
View(dat)
dat$per_unemployed <- (dat$unemployed/dat$total_population)*100
dat$per_unemployed <- round(dat$per_unemployed, 2)
rm(per_unemployed)
View(dat)
summary(dat$per_unemployed)
dat$neighbourhood[dat$per_unemployed == max(dat$per_unemployed)]
dat$neighbourhood[dat$per_unemployed == min(dat$per_unemployed)]
dat$neighbourhood[dat$per_unemployed > 4.923]
dat$neighbourhood[dat$per_unemployed > 6]
dat$neighbourhood[dat$per_unemployed < 4]
dat$neighbourhood[dat$per_unemployed < 3]
hist(dat$per_unemployed)
install.packages("gtrendsR")
library(gtrendsR)
library(ggplot2)
install.packages(dplyr)
install.packages("dplyr")
library(dplyr)
usr <- "<Google account email>"
psw <- "<Google account password>"
ch <- gconnect(usr, psw)
usr <- "<xingchiu2@gmail.com>"
psw <- "<h3yxing24>"
ch <- gconnect(usr, psw)
usr <- "xingchiu2@gmail.com"
psw <- "h3yxing24"
ch <- gconnect(usr, psw)
mayor <- gtrends(query = 'john tory',
res="week")
trend <- mayor$trend
trend$date <- as.Date(trend$start)
trend$month <- format(trend$date, '%m')
View(trend)
temp <-
trend %>%
group_by(month) %>%
summarise(avg = mean(john.tory))
temp$month <- as.numeric(temp$month)
ggplot(data = temp,
aes(x = month, y = avg)) +
geom_point(alpha = 0.5) +
geom_smooth(alpha = 0.2, color = "gold", size = 2) +
xlab(xx) + ylab(yy) +
ylim(0,20)
ggplot(data = temp,
aes(x = month, y = avg)) +
geom_point(alpha = 0.5) +
geom_smooth(alpha = 0.2, color = "gold", size = 2) +
xlab("john tory") + ylab("searches") +
ylim(0,20)
ggplot(data = temp,
aes(x = month, y = avg)) +
geom_point(alpha = 0.5) +
geom_smooth(alpha = 0.2, color = "gold", size = 1) +
xlab("john tory") + ylab("searches") +
ylim(0,20)
ggplot(data = temp,
aes(x = month, y = avg)) +
geom_line(color = "gold") +
xlab("john tory") + ylab("searches") +
ylim(0,20)
trend$month <- format(trend$date, '%M')
ggplot(data = temp,
aes(x = month, y = avg)) +
geom_line(color = "gold") +
xlab("john tory") + ylab("searches") +
ylim(0,20)
trend$month <- NULL
trend$date <- NULL
temp <-
trend %>%
group_by(month) %>%
summarise(avg = mean(john.tory))
mayor <- gtrends(query = 'rob ford',
res="week")
trend <- mayor$trend
trend$date <- as.Date(trend$start)
trend$year <- format(trend$date, '%Y')
temp <-
trend %>%
group_by(year) %>%
summarise(avg = mean(rob.ford))
temp$year <- as.numeric(temp$year)
ggplot(data = temp,
aes(x = year, y = avg)) +
geom_line(color = "gold") +
xlab("Years") + ylab("Searches for Rob Ford") +
ylim(0,50)
ggplot(data = temp,
aes(x = year, y = avg)) +
geom_line(color = "gold") +
xlab("Years") + ylab("Searches for Rob Ford") +
ylim(0,20)
ggplot(data = temp,
aes(x = year, y = avg)) +
geom_line(color = "gold") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Searches for Rob Ford") +
ylim(0,20)
ggplot(data = temp,
aes(x = year, y = avg)) +
geom_line(color = "gold") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Google Searches for Rob Ford") +
ylim(0,20)
ggplot(data = temp,
aes(x = year, y = avg)) +
geom_line(color = "gold") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,20) +
ggtitle("Google Searches for Rob Ford 2004-Present")
tory <- gtrends(query = 'john tory',
res="week")
##### Get the trend into a dataframeag
trend <- tory$trend
##### Make a date object from start
trend$date <- as.Date(trend$start)
##### Get a year column
trend$year <- format(trend$date, '%Y')
##### Group by year and replot
temp <-
trend %>%
group_by(year) %>%
summarise(avg = mean(john.tory))
## Make year numeric
temp$year <- as.numeric(temp$year)
ggplot(data = temp,
aes(x = year, y = avg)) +
geom_line(color = "gold") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,20) +
ggtitle("Google Searches for Rob Ford 2004-Present")
temp <-
trend %>%
group_by(year) %>%
summarise(avg = mean(rob.ford))
## Make year numeric
temp$year <- as.numeric(temp$year)
## Plot temp
ggplot(data = temp,
aes(x = year, y = avg)) +
geom_line(color = "gold") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,20) +
ggtitle("Google Searches for Rob Ford 2004-Present")
mayor <- gtrends(query = 'rob ford',
res="week")
##### Get the trend into a dataframe
trend <- mayor$trend
##### Make a date object from start
trend$date <- as.Date(trend$start)
##### Get a year column
trend$year <- format(trend$date, '%Y')
##### Group by year and replot
temp <-
trend %>%
group_by(year) %>%
summarise(avg = mean(rob.ford))
## Make year numeric
temp$year <- as.numeric(temp$year)
## Plot temp
ggplot(data = temp,
aes(x = year, y = avg)) +
geom_line(color = "gold") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,20) +
ggtitle("Google Searches for Rob Ford 2004-Present")
tory <- gtrends(query = 'john tory',
res="week")
##### Get the trend into a dataframeag
trend1 <- tory$trend1
##### Make a date object from start
trend1$date <- as.Date(trend1$start)
##### Get a year column
trend1$year <- format(trend1$date, '%Y')
##### Group by year and replot
temp_tory <-
trend %>%
group_by(year) %>%
summarise(avg = mean(john.tory))
## Make year numeric
temp_tory$year <- as.numeric(temp$year)
## Plot temp
ggplot(data = temp_tory,
aes(x = year, y = avg)) +
geom_line(color = "gold") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,20) +
ggtitle("Google Searches for John Tory 2004-Present")
temp_tory <-
trend %>%
group_by(year) %>%
summarise(avg = mean(john.tory))
tory <- gtrends(query = 'john tory',
res="week")
res="week")
res="week")
tory <- gtrends(query = 'john tory',
res="week")
trend1 <- tory$trend1
trend1$date <- as.Date(trend1$start)
trend1$year <- format(trend1$date, '%Y')
temp_tory <-
trend %>%
group_by(year) %>%
summarise(avg = mean(john.tory))
temp_tory <-
trend %>%
group_by(year) %>%
summarise(avg = mean(john.tory))
View(temp)
View(trend)
tory <- gtrends(query = 'john tory',
res="week")
trend <- tory$trend
trend$date <- as.Date(trend$start)
trend$year <- format(trend$date, '%Y')
temp_tory <-
trend %>%
group_by(year) %>%
summarise(avg = mean(john.tory))
temp_tory$year <- as.numeric(temp$year)
ggplot(data = temp_tory,
aes(x = year, y = avg)) +
geom_line(color = "gold") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,20) +
ggtitle("Google Searches for John Tory 2004-Present")
ggplot(data = temp_tory,
aes(x = year, y = avg)) +
geom_line(color = "red") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,20) +
ggtitle("Google Searches for John Tory 2004-Present")
ggplot(data = temp,
aes(x = year, y = avg)) +
geom_line(color = "blue") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,20) +
ggtitle("Google Searches for Rob Ford 2004-Present")
ggplot(data = temp_tory,
aes(x = year, y = avg)) +
geom_line(color = "red") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,15) +
ggtitle("Google Searches for John Tory 2004-Present")
ggplot(data = temp,
aes(x = year, y = avg)) +
geom_line(color = "blue") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,15) +
ggtitle("Google Searches for Rob Ford 2004-Present")
View(temp_tory)
View(temp)
View(temp_tory)
View(trend)
View(temp)
m=merge(temp, temp_tory, by="year")
View(m)
ggplot(data = m,
aes(x = year, y = y.avg, x.avg)) +
geom_line(color = "red") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,15) +
ggtitle("Google Searches for John Tory 2004-Present")
ggplot(data = m,
aes(x = year, y = avg.x, avg.y)) +
geom_line(color = "red") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,15) +
ggtitle("Google Searches for John Tory 2004-Present")
ggplot(data = m,
aes(x = year, y = avg.x & avg.y)) +
geom_line(color = "red") +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,15) +
ggtitle("Google Searches for John Tory 2004-Present")
ggplot(data = m, aes(year)) +
geom_line(aes(y = temp, colour = "temp")) +
geom_line(aes(y = temp_tory, colour = "temp_tory")) +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,15) +
ggtitle("Google Searches for John Tory 2004-Present")
ggplot(data = m, aes(temp)) +
geom_line(aes(y = temp, colour = "temp")) +
geom_line(aes(y = temp_tory, colour = "temp_tory")) +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,15) +
ggtitle("Google Searches for John Tory 2004-Present")
ggplot(data = m, aes(date)) +
geom_line(aes(y = temp, colour = "temp")) +
geom_line(aes(y = temp_tory, colour = "temp_tory")) +
geom_point(alpha = 0.5) +
xlab("Years") + ylab("Search Volume") +
ylim(0,15) +
ggtitle("Google Searches for John Tory 2004-Present")
library(reshape2)
m1 <- melt(m, id="year")  # convert to long format
ggplot(data=m1,
aes(x=date, y=value, colour=variable)) +
geom_line()
View(m1)
View(m)
ggplot(data=m1,
aes(x=Year, y=Value)) +
geom_line()
ggplot(data=m1,
aes(x=year, y=value)) +
geom_line()
View(m1)
ggplot(data=m1,
aes(x=year, y=value)) +
geom_point()
ggplot(data=m1,
aes(x=year, y=value)) +
geom_point(colour=variable)
geom_point(colour="red")
ggplot(data=m1,
aes(x=year, y=value)) +
geom_point() +
geom_line(aes(y = temp, colour = "temp")) +
geom_line(aes(y = temp_tory, colour = "temp_tory")) +
ggplot(data=m1,
aes(x=year, y=value)) +
geom_point() +
geom_line(aes(y = temp, colour = "temp")) +
geom_line(aes(y = temp_tory, colour = "temp_tory"))
ggplot(data=m1,aes() +
geom_line(aes(y = temp, colour = "temp")) +
geom_line(aes(y = temp_tory, colour = "temp_tory"))
ggplot(data=m1,
aes(x=year, y=value, color=variable)) +
geom_line()
ggplot(data=m1,
aes(x=year, y=value, color=variable)) +
geom_line(color=variable)
ggplot(data=m1,
aes(x=year, y=value)) +
geom_line(color=variable)
ggplot(data=m1,
aes(x=year, y=value)) +
geom_line(color="red")
View(m)
ggplot(data=m1,
aes(x=year, y=value, color = variable)) +
geom_line()
ggplot(data=m1,
aes(x=year, y=value, color = variable)) +
geom_line() +
geom_point(alpha = 0.5) +
xlab("Year") + ylab("Search Volume") +
ggtitle("Google Searches for Rob Ford vs John Tory")
search <- ggplot(data=m1,
aes(x=year, y=value, color = variable)) +
geom_line() +
geom_point(alpha = 0.5) +
xlab("Year") + ylab("Search Volume") +
ggtitle("Google Searches for Rob Ford vs John Tory")
search + scale_shape_discrete(name  ="Search Term",
breaks=c("Female", "Male"),
labels=c("Rob Ford", "John Tory"))
search + scale_shape_discrete(name  ="Search Term",
breaks=c("avg.x", "avg.y"),
labels=c("Rob Ford", "John Tory"))
search
search + scale_shape_discrete(name  ="Search Term",
breaks=c("avg.x", "avg.y"),
labels=c("Rob Ford", "John Tory"))
search + scale_colour_discrete(name  ="Search Term",
breaks=c("avg.x", "avg.y"),
labels=c("Rob Ford", "John Tory")) +
scale_shape_discrete(name  ="Search Term",
breaks=c("avg.x", "avg.y"),
labels=c("Rob Ford", "John Tory"))
search <- ggplot(data=m1,
aes(x=year, y=value, color = variable)) +
geom_line() +
geom_point(alpha = 0.5) +
xlab("Year") + ylab("Search Volume") +
ggtitle("Google Trends for Rob Ford vs John Tory")
### Change legend title and names
search
search + scale_colour_discrete(name  ="Search Term",
breaks=c("avg.x", "avg.y"),
labels=c("Rob Ford", "John Tory")) +
scale_shape_discrete(name  ="Search Term",
breaks=c("avg.x", "avg.y"),
labels=c("Rob Ford", "John Tory"))
